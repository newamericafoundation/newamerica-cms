{% load wagtailcore_tags wagtailimages_tags utilities %}

{% if page.publication_cover_image %}
  {% include './post_book_header.html' %}
{% endif %}
<!-- BLOG -->
{% image page.story_image min-1100x650 as story_image %}
<!-- EVERYTHING ELSE -->
{% image page.story_image min-1100x300 as story_image %}
<div class="post-header-container">
  {% if story_image and not page.publication_cover_image %}
  <div class="post-header with-image"
       style="background-image:
        linear-gradient(rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.15)),
        url({{ story_image.url }})">
  {% else %}
  <div class="post-header">
  {% endif %}

    <div class="post-header__text">
        <h1 class="post-header__text__heading">{{ page.title }}</h1>
        {% if page.subheading %}
          <h2 class="post-header__text__subheading">{{ page.subheading }}</h2>
        {% endif %}
        {% if page.source_url %}
          <a class="post-header__text__button button" href='{{ page.source_url }}'>Read Original Article</a>
        {% endif %}
        {% if page.rsvp_link %}
          {% if page|is_future %}
            <a class="post-header__text__button button" href='{{page.rsvp_link}}'>RSVP</a>
          {% endif %}
        {% endif %}
    </div>
  </div>
  {% if story_image.image.source %}
    <div class="caption">Photo: {{ story_image.image.source}}</div>
  {% endif %}
</div>
