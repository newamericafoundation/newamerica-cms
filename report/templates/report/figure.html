{% load utilities wagtailimages_tags %}

<figure class="figure {{value.align}} {{value.width|temp_image_width_map}}">
  {% if value.figure_number or value.figure_title %}
    <div class="figure__title">
      {% if value.figure_number %}
        <h4 class="inline {% if value.figure_title %} with-separator{% endif %}">Figure {{ value.figure_number }}</h4>
      {% endif %}
      {% if value.figure_title %}
        <h6 class="inline">{{ value.figure_title }}</h6>
      {% endif %}
    </div>
  {% endif %}
  <div class="figure__image">
      {% image value.image max-984x1500 as image %}
      <img src="{{ image.url }}" alt="{{ value.alt_text }}"/>
  </div>
  {% if value.image.caption or value.image.source %}
    <figcaption>
      {% if value.image.caption %}
        <h6>
          {{ value.image.caption }}
        </h6>
      {% endif %}
      {% if value.image.source %}
        <h6 class="caption">
          Source: {{ value.image.source }}
        </h6>
      {% endif %}
    </figcaption>
  {% endif %}
</figure>
